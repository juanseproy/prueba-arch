# ===============================
# HYPRLAND MINIMAL VM CONFIG
# Compatible con versiones recientes
# ===============================

$mainMod = SUPER

# -------------------------------
# MONITOR
# -------------------------------
monitor=,preferred,auto,1

# -------------------------------
# AUTOSTART
# -------------------------------
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP && waybar

# -------------------------------
# APLICACIONES
# -------------------------------
#bind = $mainMod, RETURN, exec, alacritty
bind = $mainMod, RETURN, exec, foot
bind = $mainMod, Q,      killactive
bind = $mainMod, D,      exec, rofi -show drun

# Menú de apagado
bind = $mainMod, ESCAPE, exec, wlogout -b 5 -l ~/.config/wlogout/layout -C ~/.config/wlogout/style.css

# Screenshot
bind = , PRINT, exec, grim -g "$(slurp)" - | wl-copy

# -------------------------------
# NAVEGACIÓN DE VENTANAS
# -------------------------------
bind = $mainMod, left,  movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up,    movefocus, u
bind = $mainMod, down,  movefocus, d

# Mover ventanas
bind = $mainMod SHIFT, left,  movewindow, l
bind = $mainMod SHIFT, right, movewindow, r
bind = $mainMod SHIFT, up,    movewindow, u
bind = $mainMod SHIFT, down,  movewindow, d

# -----------------------------------------------
# WORKSPACES — Dinámicos
# SUPER+1..5        → ir al escritorio (lo crea si no existe)
# SUPER+SHIFT+1..5  → mover ventana activa al escritorio
# SUPER+N           → crear nuevo escritorio vacío (siguiente disponible)
# SUPER+W           → cerrar escritorio actual (debe estar vacío)
# -----------------------------------------------
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5

bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5

# Escritorio siguiente/anterior (los crea automáticamente)
bind = $mainMod, bracketright, workspace, e+1
bind = $mainMod, bracketleft,  workspace, e-1

# Crear nuevo escritorio vacío (el siguiente número disponible)
bind = $mainMod, N, workspace, empty

# Mover ventana y seguirla al escritorio vacío
bind = $mainMod SHIFT, N, movetoworkspace, empty

# NOTA: Hyprland elimina automáticamente los escritorios vacíos
# cuando no tienen ventanas. No hace falta un bind para "eliminar".

# -------------------------------
# GENERAL
# -------------------------------
general {
    gaps_in = 5
    gaps_out = 10
    border_size = 2
    layout = dwindle
}

# -------------------------------
# DECORATION
# -------------------------------
decoration {
    blur {
        enabled = true
        size = 8
        passes = 3
        ignore_opacity = false
        new_optimizations = true
    }
}

blurls = wlogout

# -------------------------------
# INPUT
# -------------------------------
input {
    kb_layout = us
    follow_mouse = 1

    touchpad {
        natural_scroll = true
    }

    sensitivity = 0
}

# -------------------------------
# MISC
# -------------------------------
misc {
    disable_hyprland_logo    = true
    disable_splash_rendering = true
}