# ===============================
# HYPRLAND CONFIG
# Aesthetic: Glassmorphism · Catppuccin Mocha + Purple
# ===============================

$mainMod = SUPER

# -------------------------------
# MONITOR
# -------------------------------
monitor=,preferred,auto,1

# -------------------------------
# AUTOSTART
# -------------------------------
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP && waybar

# -------------------------------
# APLICACIONES
# -------------------------------
# alacritty no funciona bien en VMware — usar foot en VM, alacritty en bare metal
# bind = $mainMod, RETURN, exec, alacritty
bind = $mainMod, RETURN, exec, foot
bind = $mainMod, Q,      killactive
bind = $mainMod, D,      exec, rofi -show drun

# Menú de apagado
bind = $mainMod, ESCAPE, exec, wlogout -b 5 -l ~/.config/wlogout/layout -C ~/.config/wlogout/style.css

# Screenshot
bind = , PRINT, exec, grim -g "$(slurp)" - | wl-copy

# -------------------------------
# NAVEGACIÓN DE VENTANAS
# -------------------------------
bind = $mainMod, left,  movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up,    movefocus, u
bind = $mainMod, down,  movefocus, d

# Mover ventanas
bind = $mainMod SHIFT, left,  movewindow, l
bind = $mainMod SHIFT, right, movewindow, r
bind = $mainMod SHIFT, up,    movewindow, u
bind = $mainMod SHIFT, down,  movewindow, d

# -----------------------------------------------
# WORKSPACES — Dinámicos
# SUPER+1..5        → ir al escritorio
# SUPER+SHIFT+1..5  → mover ventana activa
# SUPER+N           → escritorio vacío siguiente
# -----------------------------------------------
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5

bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5

bind = $mainMod, bracketright, workspace, e+1
bind = $mainMod, bracketleft,  workspace, e-1
bind = $mainMod, N,            workspace, empty
bind = $mainMod SHIFT, N,      movetoworkspace, empty

# -------------------------------
# GENERAL
# -------------------------------
general {
    gaps_in  = 6
    gaps_out = 12
    border_size = 2

    # Bordes: acento púrpura activo, gris inactivo
    col.active_border   = rgba(cba6f7ff) rgba(89b4faff) 45deg
    col.inactive_border = rgba(31323eff)

    layout = dwindle
}

# -------------------------------
# DECORATION — Glass effect
# -------------------------------
decoration {
    rounding = 12

    # Opacidad: ventana activa un poco más opaca, inactivas más transparentes
    active_opacity   = 0.96
    inactive_opacity = 0.85

    blur {
        enabled           = true
        size              = 8
        passes            = 3
        ignore_opacity    = false
        new_optimizations = true
    }

    shadow {
        enabled      = true
        range        = 20
        render_power = 3
        color        = rgba(1a1a2e99)
    }
}

# -------------------------------
# ANIMATIONS
# -------------------------------
animations {
    enabled = true

    # Curvas
    bezier = overshot,  0.05, 0.9, 0.1, 1.05
    bezier = smoothOut, 0.5,  0,   0.99, 0.99
    bezier = smoothIn,  0.5, -0.5, 0.68, 1.5

    animation = windows,     1, 4,  overshot,  slide
    animation = windowsOut,  1, 4,  smoothOut, slide
    animation = windowsMove, 1, 4,  overshot
    animation = fade,        1, 6,  smoothIn
    animation = fadeDim,     1, 6,  smoothIn
    animation = workspaces,  1, 6,  overshot,  slidevert
    animation = border,      1, 8,  default
    animation = borderangle, 1, 36, linear,    loop
}

# -------------------------------
# LAYER RULES — Blur coherente
# -------------------------------
layerrule = blur,        waybar
layerrule = ignorezero,  waybar
layerrule = blurpopups,  waybar

layerrule = blur,        wlogout
layerrule = ignorezero,  wlogout

layerrule = blur,        rofi
layerrule = ignorezero,  rofi

# -------------------------------
# INPUT
# -------------------------------
input {
    kb_layout  = us
    follow_mouse = 1

    touchpad {
        natural_scroll = true
    }

    sensitivity = 0
}

# -------------------------------
# DWINDLE LAYOUT
# -------------------------------
dwindle {
    pseudotile      = true
    preserve_split  = true
}

# -------------------------------
# MISC
# -------------------------------
misc {
    disable_hyprland_logo    = true
    disable_splash_rendering = true
    animate_manual_resizes   = true
}